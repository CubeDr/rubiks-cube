<body>
    <style>
        body {
            --cube-size: 200px;

            margin: auto;
            width: var(--cube-size);
        }

        #container {
            height: var(--cube-size);
            transform: perspective(15cm) rotateX(-25deg) rotateY(25deg);
            transform-style: preserve-3d;
            margin: 100px 0;
            width: var(--cube-size);
        }

        .face {
            display: flex;
            flex-direction: column;
            height: var(--cube-size);
            position: absolute;
            width: var(--cube-size);
        }

        .top {
            transform: rotateX(90deg) translate3d(0, 0, calc(var(--cube-size) / 2));
        }

        .left {
            transform: rotateY(-90deg) translate3d(0, 0, calc(var(--cube-size) / 2));
        }

        .front {
            transform: translate3d(0, 0, calc(var(--cube-size) / 2));
        }

        .row {
            display: flex;
            flex-direction: row;
            flex-grow: 1;
            height: calc(var(--cube-size) / 3);
        }

        .cell {
            background-color: lightgray;
            border-radius: 4px;
            box-sizing: border-box;
            border: 2px solid black;
            flex-grow: 1;
            margin: 1px;
        }

        .color-picker {
            display: flex;
            flex-direction: row;
            height: calc(250px / 6);
            width: 250px;
        }

        .color {
            border: 2px solid #555;
            border-radius: 100%;
            box-sizing: border-box;
            flex-grow: 1;
            margin: 8px;
        }

        .color.selected {
            border: 2px solid gold;
        }
    </style>

    <div id="container">
        <div class="face front">
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
        </div>
        <div class="face top">
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
        </div>
        <div class="face left">
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
            <div class="row">
                <div class="cell"></div>
                <div class="cell"></div>
                <div class="cell"></div>
            </div>
        </div>
    </div>

    <div class="color-picker">
        <div class="color selected" style="background-color: red"></div>
        <div class="color" style="background-color: blue"></div>
        <div class="color" style="background-color: orange"></div>
        <div class="color" style="background-color: green"></div>
        <div class="color" style="background-color: white"></div>
        <div class="color" style="background-color: yellow"></div>
    </div>

    <button id="flip">Flip</button>

    <script>
        let selectedColor = 'red';
        let selectedColorElement = document.querySelector('.color.selected');
        const colors = document.getElementsByClassName('color');
        for (const color of colors) {
            color.addEventListener('click', () => {
                selectedColorElement.classList.remove('selected');
                selectedColorElement = color;
                selectedColorElement.classList.add('selected');

                selectedColor = color.style.backgroundColor;
            });
        }

        const cells = document.getElementsByClassName('cell');
        for (const cell of cells) {
            cell.addEventListener('click', () => {
                cell.style.backgroundColor = selectedColor;
            });
            cell.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                cell.style.backgroundColor = null;
                return false;
            });
        }

        const container = document.getElementById('container');
        let currentRotation = 25;
        document.getElementById('flip').addEventListener('click', () => {
            currentRotation = 90 - currentRotation;
            container.style.transform = `perspective(15cm) rotateX(-25deg) rotateY(${currentRotation}deg)`;
        });
    </script>
</body>